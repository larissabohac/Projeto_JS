<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Minha Playlist</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="container py-5">
  <h1 class="text-center mb-4">Minha Playlist</h1>

  <div class="mb-3">
    <input type="text" id="musicInput" class="form-control" placeholder="Digite o nome da música">
  </div>

  <div class="mb-4 d-flex gap-2 flex-wrap">
    <button onclick="addMusic()" class="btn btn-primary">Adicionar Música</button>
    <button onclick="removeLast()" class="btn btn-warning">Remover Última</button>
    <button onclick="sortPlaylist()" class="btn btn-info">Ordenar</button>
    <input type="text" id="searchInput" class="form-control w-auto" placeholder="Buscar..." oninput="searchMusic()">
  </div>

  <ul id="playlist" class="list-group"></ul>

  <script> 
    let playlist = [];

function renderPlaylist(filteredList = playlist) {
  const ul = document.getElementById("playlist");
  ul.innerHTML = "";

  for (let [index, music] of filteredList.entries()) {
    const li = document.createElement("li");
    li.className = "list-group-item playlist-item";

    li.innerHTML = `
      <span>${music}</span>
      <div>
        <button onclick="editMusic(${index})" class="btn btn-sm btn-secondary me-2">Editar</button>
        <button onclick="deleteMusic(${index})" class="btn btn-sm btn-danger">Excluir</button>
      </div>
    `;

    ul.appendChild(li);
  }
}

function addMusic() {
  const input = document.getElementById("musicInput");
  const musicName = input.value.trim();

  if (musicName) {
    playlist.push(musicName); 
    input.value = "";
    renderPlaylist();
  }
}

function removeLast() {
  playlist.pop(); 
  renderPlaylist();
}

function sortPlaylist() {
  playlist.sort(); 
  renderPlaylist();
}

function deleteMusic(index) {
  playlist.splice(index, 1);
  renderPlaylist();
}

function editMusic(index) {
  const newName = prompt("Editar nome da música:", playlist[index]);
  if (newName !== null && newName.trim() !== "") {
    playlist[index] = newName.trim();
    renderPlaylist();
  }
}

function searchMusic() {
  const query = document.getElementById("searchInput").value.toLowerCase();

  const filtered = playlist.filter(music => music.toLowerCase().includes(query)); 
  renderPlaylist(filtered);
}
  </script>
</body>
</html>